(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[267],{130:(e,t,s)=>{Promise.resolve().then(s.bind(s,2961))},230:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(6057),n=s(9806),a=s(8050),i=s(2246),l=s(9828);let c="http://localhost:4000/api",d=i.A.create({baseURL:c,withCredentials:!0,headers:{"Content-Type":"application/json"}});function o(e){let{bodyType:t="json",endpoint:s,exact:i=!0,queryKey:l=[],method:o="GET",params:u,headers:m,enabled:x=!0,onSuccess:h,onError:g,baseUrl:v,queryString:p,invalidateKeys:f}=e,b=(0,r.jE)(),j=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let r={method:o,url:null!=s?s:"",baseURL:null!=v?v:c,headers:m?{...m}:void 0,params:u};p&&(r.url="".concat(r.url,"?").concat(p)),e&&"GET"!==o&&("formdata"===t?(r.data=e,r.headers={...r.headers,"Content-Type":"multipart/form-data"}):r.data=e);let n=await d.request(r);return{data:n.data,status:n.status}}catch(t){var r,n,a,i,l;let e=(null==(r=t.response)?void 0:r.status)||500;return{error:(null==(a=t.response)||null==(n=a.data)?void 0:n.error)||(null==(l=t.response)||null==(i=l.data)?void 0:i.message)||t.message||"Internal error",status:e}}};if(x&&"GET"===o){var y;let e=(0,n.I)({queryKey:l,queryFn:()=>j(),refetchOnWindowFocus:!1,retry:(e,t)=>(null==t?void 0:t.status)!==401&&(null==t?void 0:t.status)!==403&&e<3,refetchOnReconnect:!1,staleTime:1/0});return{data:null==(y=e.data)?void 0:y.data,error:e.error,isPending:e.isPending,isError:e.isError,isSuccess:e.isSuccess}}let{data:N,error:w,mutate:E,mutateAsync:k,isPending:A,isSuccess:L,isError:R,reset:P}=(0,a.n)({mutationFn:async e=>{let t=await j(e);if(t.error)throw Error(t.error,{cause:t.status});return t},onSuccess:async e=>{if([200,201,204].includes(e.status)){if(l.length&&b.invalidateQueries({queryKey:l,exact:i}),null==f?void 0:f.length)for(let e of f)b.invalidateQueries(e);null==h||h()}},onError:e=>{let t={message:e.message||"An error occurred",name:e.name||"Error",cause:e.cause,stack:e.stack};null==g||g(t)}});return{data:null==N?void 0:N.data,error:w,isPending:A,isError:R,isSuccess:L,mutate:E,mutateAsync:k,reset:P}}d.interceptors.response.use(e=>e,e=>{var t;if((null==(t=e.response)?void 0:t.status)===401){let e=window.location.pathname;if(!e.includes("/login")&&!e.includes("/signup")){let{clearAuth:e}=l.n.getState();e(),window.location.href="/login"}}return Promise.reject(e)})},983:(e,t,s)=>{"use strict";var r=s(6495);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},2069:(e,t,s)=>{"use strict";s.d(t,{cn:()=>a});var r=s(418),n=s(3750);function a(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.QP)((0,r.$)(t))}},2961:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(13),n=s(8986),a=s(3701),i=s(9468),l=s(983),c=s(6662),d=s(8688);function o(e){let{params:t}=e,s=(0,l.useRouter)(),{eventId:n}=(0,c.use)(t),{data:o,isError:m,error:x,isPending:h,isSuccess:g}=(0,i.Gq)(n);if(h)return(0,r.jsx)("div",{className:"h-40 flex items-center justify-center",children:"Loading..."});if(m)return(0,r.jsxs)("div",{className:"h-40 flex items-center justify-center",children:["Error: ",x.message]});if(g&&!o)return(0,r.jsx)("div",{className:"h-40 flex items-center justify-center",children:"Event not found"});let v=null==o?void 0:o.data;return(0,r.jsxs)("div",{className:"min-h-screen",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-white to-primary h-48 flex items-center px-4 sm:px-6 lg:px-10 sm:h-64 lg:h-96 relative overflow-hidden",children:(0,r.jsxs)("div",{className:"max-w-2xl z-10",children:[(0,r.jsx)("h1",{className:"text-xl sm:text-2xl md:text-4xl lg:text-5xl font-semibold tracking-wider uppercase leading-tight",children:v.name}),(0,r.jsx)("p",{className:"mt-2 sm:mt-4 font-light text-xs sm:text-sm lg:text-base max-w-lg",children:"Experience the thrill of this exciting pigeon race."})]})}),(0,r.jsx)("div",{className:"p-4 sm:p-6 lg:p-8",children:(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4 sm:gap-6 lg:gap-8 items-center",children:[(0,r.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Entry Fee"}),(0,r.jsxs)("p",{className:"text-sm sm:text-base font-medium",children:["$ ",v.feeSchema.entryFee]})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Final Race Fee"}),(0,r.jsxs)("p",{className:"text-sm sm:text-base font-medium",children:["$ ",v.feeSchema.finalRaceFee]})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Race Date"}),(0,r.jsx)("p",{className:"text-sm sm:text-base font-medium",children:new Date(v.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Participants"}),(0,r.jsx)("p",{className:"text-sm sm:text-base font-medium",children:v._count.EventInventoryItem})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Short Name"}),(0,r.jsx)("p",{className:"text-sm sm:text-base font-medium",children:v.shortName})]}),(0,r.jsx)(a.$,{onClick:()=>{if("OPEN"!==v.status)return void d.o.error("You can only register for upcoming races.");s.push("/events/".concat(v.id,"/register"))},size:"lg",className:"w-full sm:w-auto px-8",children:"Register Now"})]})})}),(0,r.jsx)("div",{className:"bg-gray-50",children:(0,r.jsx)(u,{id:v.id})})]})}function u(e){var t;let{id:s}=e,{data:a,error:l,isError:c,isPending:d,isSuccess:o}=(0,i.KU)({id:s,params:{limit:4}});if(d)return(0,r.jsx)("div",{className:"h-40 flex items-center justify-center",children:"Loading..."});if(c&&l)return(0,r.jsx)("div",{className:"h-40 flex items-center justify-center",children:(0,r.jsx)("p",{className:"text-red-500",children:"Failed to load more races."})});if(o&&!a)return null;let u=(null==a||null==(t=a.data)?void 0:t.events)||[];return 0===u.length?null:(0,r.jsx)("div",{className:"p-4 sm:p-6 lg:p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsx)("h2",{className:"text-xl sm:text-2xl font-bold mb-4 sm:mb-6",children:"More Events You Might Like"}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6",children:u.map(e=>(0,r.jsx)(n.A,{event:e},e.id))})]})})}},3701:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var r=s(13);s(6662);var n=s(6499),a=s(9156),i=s(2069);let l=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:s,size:a,asChild:c=!1,...d}=e,o=c?n.DX:"button";return(0,r.jsx)(o,{"data-slot":"button",className:(0,i.cn)(l({variant:s,size:a,className:t})),...d})}},5772:(e,t,s)=>{"use strict";s.d(t,{b:()=>r});let r={auth:{login:"/auth/breeder/login",logout:"/auth/breeder/logout",signup:"/auth/breeder/signup",session:"/auth/session"},user:{currentUser:"/users/profile"},birds:{all:"/birds",create:"/birds",update:e=>"/birds/".concat(e)},events:{all:"/events",byId:e=>"/events/".concat(e),more:e=>"/events/".concat(e,"/more")},eventInventory:{create:"/event-inventory",getmyevents:"/event-inventory/my-events"},payment:{capture:"/payments/capture"}}},8986:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var r=s(13),n=s(9062),a=s(3701),i=s(3858),l=s.n(i);function c(e){let{event:t}=e;return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)(l(),{href:"/events/".concat(t.id),children:(0,r.jsxs)("div",{className:"aspect-video relative rounded-lg overflow-hidden",children:[(0,r.jsx)(n.default,{src:"/eventBanner.webp",alt:"event-image",width:500,height:300,className:"object-cover w-full h-full"}),(0,r.jsx)("div",{className:"absolute top-2 left-2 bg-white p-1 w-max h-max text-[11px] rounded-lg z-50",children:(0,r.jsx)("span",{children:"OPEN"===t.status?"Registration Open":"CLOSED"})})]})}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:new Date(t.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,r.jsx)("div",{className:"flex items-center gap-2 mt-1",children:(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[t._count.EventInventoryItem," participants"]})}),(0,r.jsx)("p",{className:"font-bold mt-1",children:t.name}),"OPEN"===t.status&&(0,r.jsx)(a.$,{variant:"outline",asChild:!0,className:"mt-2 border-2 border-primary",children:(0,r.jsx)(l(),{href:"/events/".concat(t.id,"/register"),children:"Register Now"})})]})]})}},9468:(e,t,s)=>{"use strict";s.d(t,{Gq:()=>i,KU:()=>l,NC:()=>a});var r=s(230),n=s(5772);function a(e){let{params:t}=e,s=t?Object.entries(t).map(e=>{let[t,s]=e;return"".concat(t,"=").concat(s)}).join("&"):"";return(0,r.A)({endpoint:n.b.events.all,params:t,queryKey:["events",s]})}function i(e){return(0,r.A)({endpoint:n.b.events.byId(e),queryKey:["event",e]})}function l(e){let{id:t,params:s}=e,a=s?Object.entries(s).map(e=>{let[t,s]=e;return"".concat(t,"=").concat(s)}).join("&"):"";return(0,r.A)({endpoint:n.b.events.more(t),params:s,queryKey:["more-events",t,a]})}},9828:(e,t,s)=>{"use strict";s.d(t,{n:()=>r});let r=(0,s(9568).v)()((e,t)=>({user:null,isAuthenticated:!1,isLoading:!0,setUser:t=>e({user:t,isAuthenticated:!!t,isLoading:!1}),clearAuth:()=>e({user:null,isAuthenticated:!1,isLoading:!1}),setLoading:t=>e({isLoading:t})}))}},e=>{e.O(0,[46,616,219,688,858,337,1,540,358],()=>e(e.s=130)),_N_E=e.O()}]);